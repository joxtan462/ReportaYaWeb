<header class="header">
  <div class="logo-container">
    <img src="assets/Logo-San-Bernardo.png" alt="Municipalidad de San Bernardo" class="logo-muni" />
    <img src="assets/logo.png" alt="Sistema de Alertas" class="logo-app" />
  </div>

  <div class="user-greeting">
    <span style="color: white">Bienvenido, <strong>{{ usuario?.nombre || 'Usuario' }}</strong> ({{ usuario?.rango || 'Invitado' }})</span>
    <button class="btn-logout" (click)="cerrarSesion()">ğŸšª Cerrar SesiÃ³n</button>
  </div>
</header>

<div class="main-content">

  <!-- MENÃš LATERAL -->
  <aside class="sidebar">
    <nav>
      <ul>
        <li>
          <a [routerLink]="['/menu']" routerLinkActive="active">
            <span class="icon">ğŸ </span> MenÃº
          </a>
        </li>
        <li>
          <a [routerLink]="['/menu']" routerLinkActive="active">
            <span class="icon">ğŸ </span> MenÃº
          </a>
        </li>
        <!-- ğŸ”¹ Ruta: alertasvecinales -->
        <li *ngIf="puedeVer('alertasvecinales')">
          <a [routerLink]="['/alertasvecinales']" routerLinkActive="active">
            <span class="icon">ğŸš¨</span> Alertas Vecinales
          </a>
        </li>

        <!-- ğŸ”¹ Ruta: camarassolicitadas -->
        <li *ngIf="puedeVer('camarassolicitadas') && !isCurrentRoute('/camarassolicitadas')">
          <a [routerLink]="['/camarassolicitadas']" routerLinkActive="active">
            <span class="icon">ğŸ“¹</span> CÃ¡maras Solicitadas
          </a>
        </li>

        <!-- ğŸ”¹ Ruta: mapa -->
        <li *ngIf="puedeVer('mapa')">
          <a [routerLink]="['/mapa']" routerLinkActive="active">
            <span class="icon">ğŸ—ºï¸</span> Mapa en Vivo
          </a>
        </li>

        <!-- ğŸ”¹ Ruta: multas -->
        <li *ngIf="puedeVer('multas')">
          <a [routerLink]="['/multas']" routerLinkActive="active">
            <span class="icon">ğŸ’°</span> Multas
          </a>
        </li>

        <!-- ğŸ”¹ Ruta: crearusuario (solo para admin) -->
        <li *ngIf="puedeVer('crearusuario')">
          <a [routerLink]="['/crearusuario']" routerLinkActive="active">
            <span class="icon">ğŸ‘¥</span> Crear Usuario
          </a>
        </li>
      </ul>
    </nav>
  </aside>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="main-area">
    <div class="camaras-container">
      <h2>ğŸ“¹ CÃ¡maras Solicitadas</h2>

      <!-- ğŸ” Filtros -->
      <div class="filters">
        <input type="text" placeholder="Filtrar por nombre" [(ngModel)]="filtroNombre" />
        <input type="text" placeholder="Filtrar por apellido" [(ngModel)]="filtroApellido" />
        <input type="text" placeholder="Filtrar por telÃ©fono" [(ngModel)]="filtroTelefono" />
        <input type="text" placeholder="Filtrar por RUT" [(ngModel)]="filtroRut" />
        <input type="text" placeholder="Filtrar por calle" [(ngModel)]="filtroCalle" />
        <input type="text" placeholder="Filtrar por motivo" [(ngModel)]="filtroMotivo" />
        <input type="date" placeholder="Filtrar por fecha" [(ngModel)]="filtroFecha" />
      </div>

      <!-- ğŸ“‹ Lista de cÃ¡maras -->
      <div class="camaras-list">
        <div
          *ngFor="let camara of camarasSolicitadas | filterCamaras : filtroNombre : filtroApellido : filtroTelefono : filtroRut : filtroCalle : filtroMotivo : filtroFecha"
          class="camara-card"
        >
          <div class="camara-header">
            <span class="nombre">{{ camara.nombre || 'Sin nombre' }}</span>
            <span class="fecha">{{ camara.fecha || 'Sin fecha' }}</span>
          </div>
          <div class="camara-body">
            <p><strong>Apellido:</strong> {{ camara.apellido || 'No especificado' }}</p>
            <p><strong>TelÃ©fono:</strong> {{ camara.telefono || 'No especificado' }}</p>
            <p><strong>RUT:</strong> {{ camara.rut || 'No especificado' }}</p>
            <p><strong>Calle:</strong> {{ camara.calle || 'No especificada' }}</p>
            <p><strong>Motivo:</strong> {{ camara.motivo || 'Sin motivo' }}</p>
          </div>
          <div class="camara-footer">
            <span class="id">ID: {{ camara.id || 'N/A' }}</span>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
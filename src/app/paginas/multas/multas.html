<header class="header">
  <div class="logo-container">
    <img src="assets/Logo-San-Bernardo.png" alt="Municipalidad de San Bernardo" class="logo-muni" />
    <img src="assets/logo.png" alt="Sistema de Alertas" class="logo-app" />
  </div>

  <div class="user-greeting">
    <span style="color: white">Bienvenido, <strong>{{ usuarioNombre || 'Usuario' }}</strong> ({{ usuarioRango || 'Invitado' }})</span>
    <button class="btn-logout" (click)="cerrarSesion()">ğŸšª Cerrar SesiÃ³n</button>
  </div>
</header>

<div class="main-content">

  <!-- MENÃš LATERAL -->
  <aside class="sidebar">
    <nav>
      <ul>
        <li>
          <a [routerLink]="['/menu']" routerLinkActive="active">
            <span class="icon">ğŸ </span> MenÃº
          </a>
        </li>
        <li *ngIf="puedeVer('alertasvecinales')">
          <a [routerLink]="['/alertasvecinales']" routerLinkActive="active">
            <span class="icon">ğŸš¨</span> Alertas Vecinales
          </a>
        </li>

        <!-- ğŸ”¹ Ruta: camarassolicitadas -->
        <li *ngIf="puedeVer('camarassolicitadas')">
          <a [routerLink]="['/camarassolicitadas']" routerLinkActive="active">
            <span class="icon">ğŸ“¹</span> CÃ¡maras Solicitadas
          </a>
        </li>

        <!-- ğŸ”¹ Ruta: mapa -->
        <li *ngIf="puedeVer('mapa')">
          <a [routerLink]="['/mapa']" routerLinkActive="active">
            <span class="icon">ğŸ—ºï¸</span> Mapa en Vivo
          </a>
        </li>

        <!-- ğŸ”¹ Ruta: multas -->
        <li *ngIf="puedeVer('multas') && !isCurrentRoute('/multas')">
          <a [routerLink]="['/multas']" routerLinkActive="active">
            <span class="icon">ğŸ’°</span> Multas
          </a>
        </li>

        <!-- ğŸ”¹ Ruta: crearusuario (solo para admin) -->
        <li *ngIf="puedeVer('crearusuario')">
          <a [routerLink]="['/crearusuario']" routerLinkActive="active">
            <span class="icon">ğŸ‘¥</span> Crear Usuario
          </a>
        </li>
      </ul>
    </nav>
  </aside>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="main-area">
    <div class="multas-container">
      <h2>ğŸ’° Multas</h2>

      <!-- ğŸ” Filtros -->
      <div class="filters">
        <input type="date" placeholder="Filtrar por fecha" [(ngModel)]="filtroFecha" />
        <input type="text" placeholder="Filtrar por infracciÃ³n" [(ngModel)]="filtroInfraccion" />
        <input type="text" placeholder="Filtrar por comentarios" [(ngModel)]="filtroComentarios" />
        <input type="text" placeholder="Filtrar por ubicaciÃ³n" [(ngModel)]="filtroUbicacion" />
        <input type="text" placeholder="Filtrar por patente" [(ngModel)]="filtroPatente" />
      </div>

      <!-- ğŸ“‹ Lista de multas -->
      <div class="multas-list">
        <div
          *ngFor="let parte of partes | filterMultas : filtroFecha : filtroInfraccion : filtroComentarios : filtroUbicacion : filtroPatente"
          class="multa-card"
          (click)="irADetalle(parte)"
        >
          <div class="multa-header">
            <span class="fecha">{{ parte.fechaFormateada || 'Fecha no disponible' }}</span>
            <span class="patente">{{ parte.patente || 'Sin patente' }}</span>
          </div>
          <div class="multa-body">
            <p><strong>InfracciÃ³n:</strong> {{ parte.infraccion || 'No especificada' }}</p>
            <p><strong>UbicaciÃ³n:</strong> {{ parte.ubicacion || 'No especificada' }}</p>
            <p><strong>Comentarios:</strong> {{ parte.comentarios || 'Sin comentarios' }}</p>
            <p><strong>Creador:</strong> {{ parte.nombreInspector || 'No asignado' }}</p>
          </div>
          <div class="multa-footer">
            <span class="id">ID: {{ parte.id || 'N/A' }}</span>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>